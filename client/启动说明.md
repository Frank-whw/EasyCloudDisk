# Client 桌面同步客户端 - 启动说明

## 📋 前置要求

- ✅ Java 17 或更高版本
- ✅ Maven 3.6+
- ✅ 已有云盘账号（如果没有，先用Web版注册）

## 🔧 配置步骤

### 1. 修改配置文件

编辑 `src/main/resources/application.yml`：

```yaml
client:
  # 改成你的服务器地址（已配置好，一般不用改）
  serverUrl: http://54.95.61.230:8080
  
  # 本地同步文件夹（会自动创建）
  syncDir: ./local
  
  # ⚠️ 必须改：你的云盘账号
  email: your-email@example.com     # 改成你的邮箱
  password: your-password           # 改成你的密码
  
  # 自动同步开关
  enableAutoSync: true
```

### 2. 编译项目

```bash
cd client
mvn clean package -DskipTests
```

### 3. 启动客户端

**Windows:**
```powershell
java -jar target/clouddisk-client-1.0.0.jar
```

**Linux/Mac:**
```bash
./start.sh
```

## 📂 使用说明

### 同步文件夹

客户端会在当前目录创建 `local/` 文件夹：

```
client/
├── local/              ← 本地同步文件夹
│   ├── 文档/
│   ├── 图片/
│   └── test.txt
└── target/
```

### 自动同步行为

1. **本地 → 云端**
   - 在 `local/` 文件夹中添加/修改文件
   - 客户端自动检测并上传

2. **云端 → 本地**
   - 其他设备上传的文件
   - 自动下载到 `local/` 文件夹

3. **冲突处理**
   - 如果同一文件同时在多处修改
   - 会创建冲突副本（如：`file_conflict_20251120.txt`）

## ⚠️ 注意事项

### 初次启动

第一次启动会：
1. 连接到服务器验证账号
2. 下载云端所有文件到本地
3. 开始监控 `local/` 文件夹

这个过程可能需要几分钟，取决于文件数量。

### 账号密码

- **硬编码在配置文件中**（不安全，仅供测试）
- 生产环境应该改用更安全的方式

### 网络要求

- 需要持续的网络连接
- 如果网络断开，客户端会自动重连
- 离线期间的修改会在重连后同步

## 🔍 调试信息

### 查看日志

客户端会在控制台输出详细日志：
- 文件变更事件
- 上传/下载进度
- 错误信息

### 手动触发同步

如果自动同步没反应：
1. 重启客户端
2. 检查 `local/` 文件夹权限
3. 查看日志中的错误信息

## ❓ 常见问题

### Q: 编译失败
A: 检查Java版本 `java -version`，需要17+

### Q: 连接服务器失败
A: 
1. 检查 `serverUrl` 配置是否正确
2. 访问 http://54.95.61.230:8080/health 确认服务器在线
3. 检查邮箱密码是否正确

### Q: 文件没有同步
A:
1. 检查 `enableAutoSync: true`
2. 查看控制台日志
3. 确认文件在 `local/` 文件夹内

### Q: 想要更改同步文件夹位置
A: 修改配置中的 `syncDir`：
```yaml
syncDir: D:/MyCloudSync  # 绝对路径
```

## 🆚 与Web版的区别

| 功能 | Web版 (frontend) | 桌面版 (client) |
|-----|-----------------|----------------|
| 文件上传 | 手动选择上传 | 自动监控同步 |
| 访问方式 | 浏览器 | 桌面应用 |
| 离线使用 | ❌ 不支持 | ✅ 本地副本 |
| 跨设备 | ✅ 任何设备 | ⚠️ 需安装 |

## 📞 获取帮助

- 检查服务器健康：http://54.95.61.230:8080/health
- 查看API文档：http://54.95.61.230:8080/swagger-ui.html



